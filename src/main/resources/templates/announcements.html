<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title}">公告列表</title>
    
    <!-- 引入CSS文件 -->
    <link rel="stylesheet" th:href="@{/plugins/announcement/assets/static/likcc-announcement-list.css}">
    
    <!-- 引入图标字体 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css">
</head>
<body>
    <!-- 页面头部 -->
    <header class="likcc-announcement-list-header">
        <div class="likcc-announcement-list-container">
            <h1 class="likcc-announcement-list-page-title">
                <i class="ri-megaphone-line"></i>
                公告列表
            </h1>
            <p class="likcc-announcement-list-page-subtitle">查看所有重要公告和通知</p>
        </div>
    </header>



    <!-- 主要内容区域 -->
    <main class="likcc-announcement-list-main-content">
        <div class="likcc-announcement-list-container">


            <!-- 公告列表 -->
            <div class="likcc-announcement-list" th:if="${announcements != null and #lists.size(announcements) > 0}">
                <article th:each="announcement : ${announcements}" 
                         th:class="'likcc-announcement-list-item' + (${announcement.spec.enablePinning} ? ' likcc-announcement-list-pinned' : '')"
                         th:data-id="${announcement.metadata.name}">
                    
                    <!-- 置顶标识 -->
                    <div th:if="${announcement.spec.enablePinning}" class="likcc-announcement-list-pinned-badge">
                        <i class="ri-pushpin-2-fill"></i>
                        置顶
                    </div>
                    
                    <!-- 公告头部 -->
                    <header class="likcc-announcement-list-item-header">
                        <h2 class="likcc-announcement-list-item-title" th:text="${announcement.spec.title}">公告标题</h2>
                        <div class="likcc-announcement-list-item-meta">
                            <span class="likcc-announcement-list-meta-item">
                                <i class="ri-time-line"></i>
                                <span th:text="${#dates.format(announcement.metadata.creationTimestamp, 'yyyy-MM-dd')}">发布时间</span>
                            </span>
                        </div>
                    </header>
                    
                    <!-- 公告内容 -->
                    <div class="likcc-announcement-list-item-content" th:utext="${announcement.spec.content}">
                        公告内容
                    </div>
                    

                    
                    <!-- 公告操作 -->
                    <footer class="likcc-announcement-list-item-footer">
                        <div class="likcc-announcement-list-item-actions">
                            <a th:href="@{'/announcements/' + ${announcement.metadata.name}}" 
                               class="likcc-announcement-list-action-button likcc-announcement-list-view-button">
                                <i class="ri-eye-line"></i>
                                查看详情
                            </a>
                            <button class="likcc-announcement-list-action-button likcc-announcement-list-share-button" 
                                    th:data-announcement-id="${announcement.metadata.name}"
                                    onclick="likccAnnouncementListShare(this.getAttribute('data-announcement-id'))">
                                <i class="ri-share-line"></i>
                                分享
                            </button>
                        </div>
                    </footer>
                </article>
            </div>

            <!-- 空状态 -->
            <div th:if="${announcements == null or #lists.size(announcements) == 0}" class="likcc-announcement-list-empty-state">
                <div class="likcc-announcement-list-empty-icon">
                    <i class="ri-megaphone-line"></i>
                </div>
                <h3 class="likcc-announcement-list-empty-title">暂无公告</h3>
                <p class="likcc-announcement-list-empty-description">
                    当前还没有发布任何公告
                </p>
                <div class="likcc-announcement-list-empty-actions">
                    <a href="/" class="likcc-announcement-list-empty-button">
                        <i class="ri-home-line"></i>
                        返回首页
                    </a>
                </div>
            </div>

            <!-- 分页导航 -->
            <div th:if="${totalPages > 1}" class="likcc-announcement-list-pagination-container">
                <nav class="likcc-announcement-list-pagination" aria-label="公告分页">
                    <!-- 上一页 -->
                    <a th:if="${currentPage > 1}" 
                       th:href="@{/announcements(page=${currentPage - 1}, size=20)}"
                       class="likcc-announcement-list-pagination-item likcc-announcement-list-pagination-prev">
                        <i class="ri-arrow-left-s-line"></i>
                        上一页
                    </a>
                    
                    <!-- 页码 -->
                    <div class="likcc-announcement-list-pagination-numbers">
                        <a th:each="pageNum : ${#numbers.sequence(1, totalPages)}"
                           th:href="@{/announcements(page=${pageNum}, size=20)}"
                           th:class="'likcc-announcement-list-pagination-item' + (${pageNum == currentPage} ? ' likcc-announcement-list-pagination-active' : '')"
                           th:text="${pageNum}">
                            1
                        </a>
                    </div>
                    
                    <!-- 下一页 -->
                    <a th:if="${currentPage < totalPages}" 
                       th:href="@{/announcements(page=${currentPage + 1}, size=20)}"
                       class="likcc-announcement-list-pagination-item likcc-announcement-list-pagination-next">
                        下一页
                        <i class="ri-arrow-right-s-line"></i>
                    </a>
                </nav>
                

            </div>
        </div>
    </main>

    <!-- 页面底部 -->
    <footer class="likcc-announcement-list-footer-page">
        <div class="likcc-announcement-list-container">
            <p class="likcc-announcement-list-footer-text">
                <i class="ri-heart-line"></i>
                公告系统由 Halo 公告插件提供支持
            </p>
        </div>
    </footer>

    <!-- 分享弹窗 -->
    <div id="likccAnnouncementListShareModal" class="likcc-announcement-list-share-modal">
        <div class="likcc-announcement-list-share-modal-content">
            <div class="likcc-announcement-list-share-modal-header">
                <h3>分享公告</h3>
                <button class="likcc-announcement-list-share-modal-close" onclick="likccAnnouncementListCloseShareModal()">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <div class="likcc-announcement-list-share-modal-body">
                <div class="likcc-announcement-list-share-options">
                    <button class="likcc-announcement-list-share-option" onclick="likccAnnouncementListShareToWeChat()">
                        <i class="ri-wechat-line"></i>
                        微信
                    </button>
                    <button class="likcc-announcement-list-share-option" onclick="likccAnnouncementListShareToWeibo()">
                        <i class="ri-weibo-line"></i>
                        微博
                    </button>
                    <button class="likcc-announcement-list-share-option" onclick="likccAnnouncementListCopyLink()">
                        <i class="ri-link"></i>
                        复制链接
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入JavaScript文件 -->
    <script th:src="@{/plugins/announcement/assets/static/likcc-announcement-list.js}"></script>
</body>
</html> 